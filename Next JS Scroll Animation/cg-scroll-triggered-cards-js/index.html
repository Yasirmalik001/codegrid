<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>NextJS x ScrollTrigger Animated Cards | @Codegrid</title>
    <link
      rel="stylesheet"
      href="https://unpkg.com/lenis@1.1.13/dist/lenis.css"
    />
    <link rel="stylesheet" href="./styles.css" />
  </head>
  <body>
    <section class="hero">
      <div class="img">
        <img src="./assets/pro-logo.png" alt="" />
      </div>
    </section>

    <section class="main">
      <div class="main-content">
        <div class="logo"><img src="./assets/logo.JPG" alt="" /></div>
        <div class="copy">
          <div class="line"><p>Delve into coding without clutter.</p></div>
          <div class="line"><p>One subscription. Endless web design.</p></div>
          <div class="line"><p>Take the fast lane to mastery.</p></div>
        </div>
        <div class="btn"><button>Get PRO</button></div>
      </div>

      <div class="row">
        <div class="card card-left">
          <img src="./assets/img-1.jpg" alt="" />
        </div>
        <div class="card card-right">
          <img src="./assets/img-2.jpg" alt="" />
        </div>
      </div>

      <div class="row">
        <div class="card card-left">
          <img src="./assets/img-3.jpg" alt="" />
        </div>
        <div class="card card-right">
          <img src="./assets/img-4.jpg" alt="" />
        </div>
      </div>

      <div class="row">
        <div class="card card-left">
          <img src="./assets/img-5.jpg" alt="" />
        </div>
        <div class="card card-right">
          <img src="./assets/img-6.jpg" alt="" />
        </div>
      </div>
    </section>

    <section class="footer"><a href="#">Link in description</a></section>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>
    <script src="https://unpkg.com/lenis@1.1.13/dist/lenis.min.js"></script>
    <script>
      // lenis smooth scroll
      const lenis = new Lenis();

      lenis.on("scroll", ScrollTrigger.update);

      gsap.ticker.add((time) => {
        lenis.raf(time * 1000);
      });

      gsap.ticker.lagSmoothing(0);

      // scrolltrigger animation
      const scrollTriggerSettings = {
        trigger: ".main",
        start: "top 25%",
        toggleActions: "play reverse play reverse",
      };

      gsap.utils.toArray(".row").forEach((row, index) => {
        const cardLeft = row.querySelector(".card-left");
        const cardRight = row.querySelector(".card-right");

        const leftXValues = [-800, -900, -400];
        const rightXValues = [800, 900, 400];

        const leftRotationValues = [-30, -20, -35];
        const rightRotationValues = [30, 20, 35];

        const yValues = [100, -150, -400];

        gsap.to(cardLeft, {
          x: leftXValues[index],
          scrollTrigger: {
            trigger: ".main",
            start: "top center",
            end: "150% bottom",
            scrub: true,
            onUpdate: (self) => {
              const progress = self.progress;
              cardLeft.style.transform = `translateX(${
                progress * leftXValues[index]
              }px) translateY(${progress * yValues[index]}px) rotate(${
                progress * leftRotationValues[index]
              }deg)`;
              cardRight.style.transform = `translateX(${
                progress * rightXValues[index]
              }px) translateY(${progress * yValues[index]}px) rotate(${
                progress * rightRotationValues[index]
              }deg)`;
            },
          },
        });
      });

      gsap.to(".logo", {
        scale: 1,
        duration: 0.5,
        ease: "power1.out",
        scrollTrigger: scrollTriggerSettings,
      });

      gsap.to(".line p", {
        y: 0,
        duration: 0.5,
        ease: "power1.out",
        stagger: 0.1,
        scrollTrigger: scrollTriggerSettings,
      });

      gsap.to("button", {
        y: 0,
        opacity: 1,
        duration: 0.5,
        ease: "power1.out",
        delay: 0.25,
        scrollTrigger: scrollTriggerSettings,
      });
    </script>
  </body>
</html>
